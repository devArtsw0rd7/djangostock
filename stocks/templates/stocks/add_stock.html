{% extends 'stocks/base.html' %}
{% block title %}webStock - add Stock  {% endblock title %}

{% block content %}
    <h1>Add Stock to Portfolio</h1>
    <br>
    <br>

    <form action="{% url 'stocks:add_stock' %}" class="form-inline my-2 my-lg-0" method="POST">
        {% csrf_token %}
        <input class="form-control mr-sm-2" type="search" placeholder="Add to Portfolio" aria-label="Search"
               name="ticker">
        <button class="btn btn-outline-secondary my-2 my-sm-0" type="submit">Add Stock</button>
    </form>
    <br>

    <!-- Display nodata message if database does not contain
    {% if nodata %}

        {{ nodata }}
    {% else %}
        <br>
        <!-- Stock Portfolio Database Table -->
        <table class="table table-striped table-bordered table-hover">
            <thead class="thead-dark">
            <!--Table Column Headers-->
            <tr>

                <th scope="col">Company Name</th>
                <th scope="col">Stock Price</th>
                <th scope="col">Previous Close</th>
                <th scope="col">Market Cap</th>
                <th scope="col">YTD Change</th>
                <th scope="col">52-week High</th>
                <th scope="col">52-week Low</th>

            </tr>
            </thead>

            <tbody>
            {% if ticker %}
                {% for list_item in output %}
                    <tr>
                        <th>{{ list_item.companyName }}</th>
                        <td>${{ list_item.latestPrice }}</td>
                        <td>${{ list_item.previousClose }}</td>
                        <td>${{ list_item.marketCap }}</td>
                        <td>{{ list_item.ytdChange }} %</td>
                        <td>${{ list_item.week52High }}</td>
                        <td>${{ list_item.week52Low }}</td>

                    </tr>
                {% endfor %}
            {% endif %}
            </tbody>
        </table>
    {% endif %}

    <br>

{% endblock content %}